<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Buttons to start and stop a timer in JavaScript | </title>
		
		<link rel="stylesheet" href="../../../../../tore/@/fonts/listΣ.css?v=1">
<link rel="stylesheet" href="../../../../../tore/layd/deff/&/aefb44b7dac371a3860e9079298a950e.ructΣ.css">
<link rel="stylesheet" href="../../../../../tore/&/2290bf7aeadc4261337d6f570a3cf0c5.apprΣ.css">

<script src="../../../../../tore/&/77748427269d1c81490f5acb6ce46fc1.apprΣ.js" defer></script>


<meta name="yandex-verification" content="00eb45b7559e5c68">
<meta name="google-site-verification" content="Af0TM2OrwIEtjoQXxYz2-1C-21E1m7DB23_kWpE9sLg">
<meta name="viewport" content="width=device-width, initial-scale=1.0">		
		<meta name="description" content="In this lesson, we will learn how to make buttons that start and stop the timer in JavaScript.">
		<link rel="shortcut icon" type="image/x-icon" href="../../../../../favicon.ico">
	</head>
	<body id="top" data-gq="D">
		<div data-r="ruct/wrap">
			<header>
				<div data-r="ruct/topp">
	<div data-r="topp/left">
		<div data-w="nict/logo">
	<img data-e="img" data-x src="" alt="">
</div>	</div>
	<div data-r="topp/righ">
		offline version v3	</div>
	<div data-r="topp/cent">
		<br><br>	</div>
</div>								
				<div data-r="ruct/navi">
					<div data-w="nict/over">
			<span data-e="hash" data-x>⊗jsPmTmrSB</span>
				<span data-e="lofo" data-x>446 of 502</span>
				<a href="../../../../../en/javascript/book/prime.html" data-e="link" data-x>menu</a>
	</div>					<nav data-w="nict/mainmenu">
	<section data-e="main" data-x data-gm-acte="T">
		<span data-q-href="/en/markup/" data-e="open" data-x data-m-targ="markup">Markup</span>
		<span data-q-href="/en/javascript/" data-e="open" data-x data-m-targ="javascript">JavaScript</span>
	</section>
	
	<section data-e="subb" data-x data-gm-acte="F" data-m-tabb="markup">
		<a href="../../../../../en/markup/manual/html.html">HTML manual</a>
		<a href="../../../../../en/markup/manual/css.html">CSS manual</a>
	</section>
	
	<section data-e="subb" data-x data-gm-acte="F" data-m-tabb="javascript">
		<a href="../../../../../en/javascript/book/prime.html">Prime book</a>
		<a href="../../../../../en/javascript/book/practice.html">Practice book</a>
		<a href="../../../../../en/javascript/book/supreme.html">Supreme book</a>
		<a href="../../../../../en/javascript/manual.html">Manual</a>
	</section>
</nav>									</div>
			</header>
			<main>
				<div data-w="nict/hett">
	<h1>Buttons to start and stop a timer in JavaScript</h1>
</div>				<div data-p="cont/pane">
<p>
	Let's now make two buttons: by clicking on the first one, 
	let the timer start, and by clicking on the second one, 
	it will stop. Here everything will not be so simple and 
	a trap awaits us. In order to understand the essence of 
	this trick, I will describe the creation of the 
	code in steps.
</p>
<p>
	So, we make two buttons:
</p>
<div data-p="bock/pane">
	<code data-w="bock/code" data-lo="high" data-m-lang="html">&lt;button id="start"&gt;start&lt;/button&gt;
&lt;button id="stop"&gt;stop&lt;/button&gt;</code>
</div>
<p>
	We get references to these buttons into variables:
</p>
<div data-p="bock/pane">
	<code data-w="bock/code" data-lo="high" data-m-lang="javascript">let start = document.querySelector('#start');
let stop  = document.querySelector('#stop');</code>
</div>
<p>
	By pressing the first button, we start the timer 
	by writing its number to a variable:
</p>
<div data-p="bock/pane">
	<code data-w="bock/code" data-lo="high" data-m-lang="javascript">start.addEventListener('click', function() {
	let timerId = setInterval(function() {
		console.log('!')
	}, 1000);
});</code>
</div>
<p>
	And now we'll stop the timer by 
	pressing the second button:
</p>
<div data-p="bock/pane">
	<code data-w="bock/code" data-lo="high" data-m-lang="javascript">start.addEventListener('click', function() {
	let timerId = setInterval(function() {
		console.log('!')
	}, 1000);
});

// Stopping the timer:
stop.addEventListener('click', function() {
	clearInterval(timerId);
});</code>
</div>
<p>
	However, if we try to run the above code, we are in 
	for a surprise: when we try to stop the timer, we 
	find that the variable <code data-gs="comd/c" data-x>timerId</code> is equal to 
	<code data-gs="comd/c" data-x>undefined</code>! Why did it happen? Therefore, 
	when starting the timer, we made our variable 
	<code data-gs="comd/c" data-x>timerId</code> local inside the function bound 
	to the <code data-gs="comd/c" data-x>start</code> button.
</p>
<p>
	To solve the problem, let's make the <code data-gs="comd/c" data-x>timerId</code> 
	variable global - in this case, it will be available 
	both in the timer start function and in the stop function:
</p>
<div data-p="bock/pane">
	<code data-w="bock/code" data-lo="high" data-m-lang="javascript">let timerId; // makes the variable global

start.addEventListener('click', function() {
	timerId = setInterval(function() {
		console.log('!')
	}, 1000);
});

stop.addEventListener('click', function() {
	clearInterval(timerId);
});</code>
</div>
<div data-w="cont/task">
	<p>
		Let a variable be given that initially stores the 
		number <code data-gs="comd/n" data-x>100</code>. There are also two buttons. By 
		pressing the first button, start the timer, which 
		every second will decrease the value of the variable 
		by <code data-gs="comd/n" data-x>1</code> and output the new value to the console. 
		As soon as the value of the variable reaches zero, 
		stop the timer.
	</p>
	<p>
		Stop the timer by pressing the second button. Also 
		stop the timer if the second button was not pressed, 
		but the value of the variable reached zero.
	</p>
</div>
<div data-w="cont/task">
	<p>
		Some programmer wrote a code that, when a button is 
		pressed, starts a timer that prints the current time 
		to the console:
	</p>
	<div data-p="bock/pane">
		<code data-w="bock/code" data-lo="high" data-m-lang="html">&lt;input type="submit" id="start" value="start"&gt;
&lt;input type="submit" id="stop"  value="stop"&gt;</code>
		<code data-w="bock/code" data-lo="high" data-m-lang="javascript">let start = document.querySelector('#start');
let stop  = document.querySelector('#stop');

start.addEventListener('click', function() {
	let timerId = setInterval(function() {
		let date = new Date;
		console.log(date.getMinutes() + ' ' + date.getSeconds());
	}, 1000);
});

stop.addEventListener('click', function() {
	clearInterval(timerId);
});</code>
	</div>
	<p>
		After running the code, however, it turned out that 
		the stop button didn't work. Please fix the code 
		author's mistake.
	</p>
</div>
<div data-w="cont/task">
	<p>
		Another programmer also wrote code to 
		solve the previous problem:
	</p>
	<div data-p="bock/pane">
		<code data-w="bock/code" data-lo="high" data-m-lang="html">&lt;input type="submit" id="start" value="start"&gt;
&lt;input type="submit" id="stop"  value="stop"&gt;</code>
		<code data-w="bock/code" data-lo="high" data-m-lang="javascript">let start = document.querySelector('#start');
let stop  = document.querySelector('#stop');

let timerId;

start.addEventListener('click', function() {
	let timerId = setInterval(function() {
		let date = new Date;
		console.log(date.getMinutes() + ' ' + date.getSeconds());
	}, 1000);
});

stop.addEventListener('click', function() {
	clearInterval(timerId);
});</code>
	</div>
	<p>
		After running the code, however, again it turned 
		out that the stop button did not work. Fix the 
		code author's mistake.
	</p>
</div>
<div data-w="cont/task">
	<p>
		Another programmer also wrote code to 
		solve the previous problem:
	</p>
	<div data-p="bock/pane">
		<code data-w="bock/code" data-lo="high" data-m-lang="html">&lt;input type="submit" id="start" value="start"&gt;
&lt;input type="submit" id="stop"  value="stop"&gt;</code>
		<code data-w="bock/code" data-lo="high" data-m-lang="javascript">let start = document.querySelector('start');
let stop  = document.querySelector('stop');

let timerId;

start.addEventListener('click', function() {
	setInterval(function() {
		let date = new Date;
		console.log(date.getMinutes() + ' ' + date.getSeconds());
	}, 1000);
});

stop.addEventListener('click', function() {
	clearInterval(timerId);
});</code>
	</div>
	<p>
		After running the code, however, again it turned 
		out that the stop button did not work. Fix the 
		code author's mistake.
	</p>
</div>
<div data-w="cont/task">
	<p>
		Another programmer also wrote code to 
		solve the previous problem:
	</p>
	<div data-p="bock/pane">
		<code data-w="bock/code" data-lo="high" data-m-lang="html">&lt;input type="submit" id="start" value="start"&gt;
&lt;input type="submit" id="stop"  value="stop"&gt;</code>
		<code data-w="bock/code" data-lo="high" data-m-lang="javascript">let start = document.querySelector('start');
let stop  = document.querySelector('stop');

let timerId;

start.addEventListener('click', function() {
	let timerId = setInterval(function() {
		let date = new Date;
		console.log(date.getMinutes() + ' ' + date.getSeconds());
	}, 1000);
});

stop.addEventListener('click', function() {
	clearInterval();
});</code>
	</div>
	<p>
		After running the code, however, again it turned 
		out that the stop button did not work. Fix the 
		code author's mistake.
	</p>
</div>
<div data-w="cont/task">
	<p>
		The code I gave in the theoretical part does not 
		take into account the fact that several clicks 
		can be made on the start button. To fix this 
		problem, you can unbind the event from this 
		button by pressing the start button, and bind 
		it back by pressing the stop button. 
		Fix the problem.
	</p>
</div>
</div>			</main>
				<div data-w="nict/nebr">
					<a href="../../../../../en/javascript/book/prime/timers/multiple-launch.html" data-e="prev" data-x>
				<span data-e="arow" data-x>&larr;</span>
			</a>
							<a href="../../../../../en/javascript/book/prime/timers/dom.html" data-e="next" data-x>
				<span data-e="arow" data-x>&rarr;</span>
			</a>
			</div>
			<footer data-w="ruct/foot">
				<div data-w="nict/finf">
	<span data-e="text" data-x>
		Trepachev Dmitry &copy; 2012-2024	</span>
	<br>
	<a data-e="link" data-x href="https://t.me/trepachev_dmitry">t.me/trepachev_dmitry</a>
</div>							</footer>
			<div data-w="nict/jump">
	<a href="#top"><span>&uarr;</span></a>
</div>			<div data-w="nict/lagr">
	<a href="../../../../../en/javascript/book/prime/timers/stop-button.html" data-m-curr="T">en</a><a href="../../../../../ru/javascript/book/prime/timers/stop-button.html" data-m-curr="F">ru</a></div>					</div>
		
		<script src="../../../../../tore/@/metrikaΣ.js?v=1"></script>	</body>
</html>